import React from 'react'
import { connect } from 'dva';
import { routerRedux, Icon } from 'dva/router';
import { WhiteSpace } from 'antd-mobile';
import { Nav, BaseLine } from 'components/Layout'
import MyEditor from 'components/editor/index'
import InputFoot from 'components/inputfoot/inputfoot'
import Discuss from '../discuss/index'
import DetailsComponent from '../detailscomponent/index'
import './index.less'

function Details({loading, dispatch, details}) {

    const {currentContent, currentComments, isShowEditor, isShowInputFoot, placeholder, is404, ...props} = details;
    const {isCollect=false} = currentContent;
    const contentProps = {
            ...props,
            currentContent,
            dispatch
        },
        commendProps = {
            ...props,
            currentComments,
            dispatch
    }

    return (
        <div>
          <Nav dispatch={ dispatch } {...props} isCollect={ isCollect && !is404 } />
          { is404 ? (
            <div className="page-content-error">
              <h1>页面未找到</h1>
              <span>(或者已删除)</span>
            </div>
            ) : (
            <div>
              <DetailsComponent contentProps={ contentProps } />
              <WhiteSpace size='sm' />
              <Discuss commendProps={ commendProps } />
              <BaseLine />
              <InputFoot isShowInputFoot={ isShowInputFoot } dispatch={ dispatch } currentComments={ currentComments } />
              <MyEditor isShowEditor={ isShowEditor } dispatch={ dispatch } placeholder={ placeholder } />
            </div>
            ) }
        </div>
    )
}
export default connect(({details, loading}) => ({
    details,
    loading,
}))(Details);
